(this["webpackJsonpphonebook-p2"]=this["webpackJsonpphonebook-p2"]||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},20:function(e,t,n){},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),o=n.n(c),u=(n(20),n(14)),i=n(2),l=(n(21),function(e){var t=e.text;return a.a.createElement("h2",null,t)}),m=function(e){var t=e.person;return a.a.createElement(a.a.Fragment,null,t.name," ",t.number)},f=function(e){var t=e.type,n=e.onClick,r=e.text;return a.a.createElement("button",{type:t,onClick:n},r)},d=function(e){var t=e.persons,n=e.handleDelete;return t.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(m,{person:e}),a.a.createElement(f,{onClick:function(){return n(e.id,e.name)},text:"delete"}))}))},s=function(e){var t=e.newName,n=e.newNumber,r=e.addPerson,c=e.handleName,o=e.handleNumber;return a.a.createElement("form",{onSubmit:r},a.a.createElement("div",null,"name:"," ",a.a.createElement("input",{value:t,onChange:c,placeholder:"Input unique name",required:!0})),a.a.createElement("div",null,"number:"," ",a.a.createElement("input",{value:n,onChange:o,placeholder:"Use phone# format",pattern:"^[+]{0,1}[(\\)\\-\\s\\./0-9]*$"})),a.a.createElement("div",null,a.a.createElement(f,{type:"submit",text:"add"})))},p=function(e){var t=e.filter,n=e.handleFilter;return a.a.createElement("div",null,"filter shown with:"," ",a.a.createElement("input",{value:t,onChange:n,placeholder:"Search name..."}))},h=n(3),E=n.n(h),b="/api/persons",v=function(e){return E.a.post(b,e).then((function(e){return e.data}))},g=function(){return E.a.get(b).then((function(e){return e.data}))},w=function(e,t){return E.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},y=function(e){return E.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},N=function(e){var t=e.text;return a.a.createElement("div",{style:{color:"green",fontStyle:"italic",fontSize:16}},a.a.createElement("br",null),a.a.createElement("em",null,t))},j=function(e){var t=e.notification;return t?a.a.createElement("div",{className:t.type},t.msg):null},O=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),m=Object(i.a)(o,2),f=m[0],h=m[1],E=Object(r.useState)(""),b=Object(i.a)(E,2),O=b[0],k=b[1],x=Object(r.useState)(""),S=Object(i.a)(x,2),C=S[0],D=S[1],F=Object(r.useState)(null),P=Object(i.a)(F,2),I=P[0],q=P[1];Object(r.useEffect)((function(){g().then((function(e){return c(e)}))}),[]);var A=function(e,t){if(window.confirm("".concat(f.trim()," is already added to your contact; replace old number with a new one?"))){var r=n.find((function(t){return t.id===e})),a=Object(u.a)({},r,{number:t});w(r.id,a).then((function(e){c(n.map((function(t){return t.id!==r.id?t:e}))),h(""),k(""),q("Updated ".concat(a.name))})).catch((function(t){console.log("Error while updating:",t),c(n.filter((function(t){return t.id!==e}))),U("Information of ".concat(a.name," has already been removed from server"),"error")}))}},J=function(e){return e.toLowerCase().trim()},T=n.filter((function(e){return J(e.name).includes(J(C))})),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";q({msg:e,type:t}),setTimeout((function(){q(null)}),5e3)};return a.a.createElement("div",{className:"App"},a.a.createElement(l,{text:"Phonebook",className:"h1"}),a.a.createElement(j,{notification:I}),a.a.createElement(p,{filter:C,handleFilter:function(e){return D(e.target.value)}}),a.a.createElement(l,{text:"New Contact"}),a.a.createElement(s,{newName:f,newNumber:O,addPerson:function(e){e.preventDefault();var t={name:f.trim(),number:O.trim()},r=n.find((function(e){return J(e.name)===J(f)}));if("undefined"!==typeof r)return A(r.id,t.number);v(t).then((function(e){c(n.concat(e)),h(""),k(""),U("Added ".concat(t.name))})).catch((function(e){console.log("Error adding person",e.response.data),U("".concat(e.response.data.error),"error")}))},handleName:function(e){return h(e.target.value)},handleNumber:function(e){return k(e.target.value)}}),a.a.createElement(l,{text:"Numbers"}),a.a.createElement("ul",null,a.a.createElement(d,{persons:T,handleDelete:function(e,t){window.confirm("Delete ".concat(t,"?"))&&y(e).then((function(){c(n.filter((function(t){return t.id!==e}))),U("Deleted ".concat(t))})).catch((function(r){console.log("Error while deleting:",r),c(n.filter((function(t){return t.id!==e}))),U("".concat(t," was already removed from server"),"error")}))}})),a.a.createElement(N,{text:"Test Footer: Phonebook contact app"}))};o.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e821fafa.chunk.js.map